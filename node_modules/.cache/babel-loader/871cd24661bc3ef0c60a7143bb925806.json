{"ast":null,"code":"import _slicedToArray from\"/Users/krithikasudupa/Documents/ipm-marketplace-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";/*\n#\n# Copyright 2020- IBM Inc. All rights reserved\n# SPDX-License-Identifier: Apache2.0\n#\n*/import React,{useState,useEffect}from\"react\";import axios from\"axios\";import{Table,TableHead,TableRow,TableHeader,TableBody,TableCell,Button,TableContainer,DataTableSkeleton,Loading,InlineNotification}from\"carbon-components-react\";import ContainerComponent from\"./../Layout/Container/ContainerComponent\";import\"./Switch.css\";export default function SwitchComponent(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),plans=_useState2[0],setPlans=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoader=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),spinner=_useState6[0],setSpinner=_useState6[1];var _useState7=useState({status:false,message:\"\"}),_useState8=_slicedToArray(_useState7,2),error=_useState8[0],setError=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),productName=_useState10[0],setProductName=_useState10[1];var urlUuid=props.match.params.uuid;var urlPlanId=props.match.params.planId;var urlOrderReferenceNumber=props.match.params.orderReferenceNumber;var headers=[\"Product\",\"Description\",\"\"];var hostname=process.env.NODE_ENV===\"development\"?\"http://localhost:3000\":window.location.origin;var currentURL=window.location.href;useEffect(function(){getPlans();},[]);var getPlans=function getPlans(){axios.get(\"\".concat(hostname,\"/partner/product/\").concat(urlUuid,\"/plans/data\")).then(function(response){setLoader(false);if(response.data){setPlans(response.data.plans);}}).catch(function(error){var _error$err;console.error(error);setError({status:true,message:((_error$err=error.err)===null||_error$err===void 0?void 0:_error$err.errorMessage)||\"Something went wrong!!!\"});});};/**\n     * @param  {} product\n     * Generate CCP url\n     */var redirectToBuyMore=function redirectToBuyMore(product){setProductName(product.name);sessionStorage.setItem(\"or\",urlOrderReferenceNumber);axios.post(\"\".concat(hostname,\"/partner/product/\").concat(urlUuid,\"/buymore/\").concat(product.id,\"/\").concat(urlOrderReferenceNumber),//buyMore\n{currentURL:currentURL}).then(function(res){if(res.data.redirectUrl){window.open(res.data.redirectUrl);}else{var _res$data,_res$data$err;setError({status:true,message:(res===null||res===void 0?void 0:(_res$data=res.data)===null||_res$data===void 0?void 0:(_res$data$err=_res$data.err)===null||_res$data$err===void 0?void 0:_res$data$err.errorMessage)||\"Something went wrong!!!\"});}setSpinner(false);}).catch(function(error){var _error$response,_error$response$data$;setError({status:true,message:((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data$=_error$response.data.err)===null||_error$response$data$===void 0?void 0:_error$response$data$.errorMessage)||\"Something went wrong!!!\"});});};var buttonPropsBuyMore=function buttonPropsBuyMore(product){return{size:\"small\",tooltipAlignment:\"center\",onClick:function onClick(){return redirectToBuyMore(product);},className:\"buy-more-button\"};};var skeletTableProps=function skeletTableProps(){return{headers:headers,columnCount:3,rowCount:20,zebra:true,compact:false,showHeader:true,showToolbar:false};};var loadingProps=function loadingProps(){return{active:spinner,withOverlay:false,small:true,description:\"\"};};var notificationProps=function notificationProps(error){return{kind:\"error\",className:\"switch-error\",lowContrast:false,role:\"alert\",title:productName+\" - \"+error.message,subtitle:\"Please try again or contact support if the error persists.\",iconDescription:\"describes the close button\",statusIconDescription:\"describes the status icon\",hideCloseButton:false,onCloseButtonClick:function onCloseButtonClick(){return _onCloseButtonClick();}};};var _onCloseButtonClick=function _onCloseButtonClick(){return setError({status:false,message:\"\"});};return/*#__PURE__*/React.createElement(ContainerComponent,null,error.status&&/*#__PURE__*/React.createElement(InlineNotification,notificationProps(error)),loading?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{style:{width:\"auto\"}},/*#__PURE__*/React.createElement(DataTableSkeleton,skeletTableProps()),/*#__PURE__*/React.createElement(\"br\",null))):/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(TableContainer,{title:\"Plans\",description:\"Click configure to build desired configuration and order.\"},/*#__PURE__*/React.createElement(Table,null,/*#__PURE__*/React.createElement(TableHead,null,/*#__PURE__*/React.createElement(TableRow,null,headers.map(function(header){return/*#__PURE__*/React.createElement(TableHeader,{key:header},header);}),/*#__PURE__*/React.createElement(TableHeader,null))),/*#__PURE__*/React.createElement(TableBody,null,plans.map(function(plan){return/*#__PURE__*/React.createElement(TableRow,{key:plan.id},/*#__PURE__*/React.createElement(TableCell,null,plan.name),/*#__PURE__*/React.createElement(TableCell,null,plan.description),/*#__PURE__*/React.createElement(TableCell,null,urlPlanId===plan.id?\"Current plan\":/*#__PURE__*/React.createElement(Button,buttonPropsBuyMore(plan),\"Select\",\" \",spinner&&/*#__PURE__*/React.createElement(Loading,Object.assign({},loadingProps(),{className:\"some-class\"})))));}))))));}","map":{"version":3,"sources":["/Users/krithikasudupa/Documents/ipm-marketplace-app/src/components/SwitchComponent/SwitchComponent.js"],"names":["React","useState","useEffect","axios","Table","TableHead","TableRow","TableHeader","TableBody","TableCell","Button","TableContainer","DataTableSkeleton","Loading","InlineNotification","ContainerComponent","SwitchComponent","props","plans","setPlans","loading","setLoader","spinner","setSpinner","status","message","error","setError","productName","setProductName","urlUuid","match","params","uuid","urlPlanId","planId","urlOrderReferenceNumber","orderReferenceNumber","headers","hostname","process","env","NODE_ENV","window","location","origin","currentURL","href","getPlans","get","then","response","data","catch","console","err","errorMessage","redirectToBuyMore","product","name","sessionStorage","setItem","post","id","res","redirectUrl","open","buttonPropsBuyMore","size","tooltipAlignment","onClick","className","skeletTableProps","columnCount","rowCount","zebra","compact","showHeader","showToolbar","loadingProps","active","withOverlay","small","description","notificationProps","kind","lowContrast","role","title","subtitle","iconDescription","statusIconDescription","hideCloseButton","onCloseButtonClick","width","map","header","plan"],"mappings":"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","sourcesContent":["/*\n#\n# Copyright 2020- IBM Inc. All rights reserved\n# SPDX-License-Identifier: Apache2.0\n#\n*/\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\n\nimport {\n    Table,\n    TableHead,\n    TableRow,\n    TableHeader,\n    TableBody,\n    TableCell,\n    Button,\n    TableContainer,\n    DataTableSkeleton,\n    Loading,\n    InlineNotification,\n} from \"carbon-components-react\";\n\nimport ContainerComponent from \"./../Layout/Container/ContainerComponent\";\n\nimport \"./Switch.css\";\n\nexport default function SwitchComponent(props) {\n    const [plans, setPlans] = useState([]);\n    const [loading, setLoader] = useState(true);\n    const [spinner, setSpinner] = useState(false);\n    const [error, setError] = useState({ status: false, message: \"\" });\n    const [productName, setProductName] = useState(\"\");\n\n    const urlUuid = props.match.params.uuid;\n    const urlPlanId = props.match.params.planId;\n    const urlOrderReferenceNumber = props.match.params.orderReferenceNumber;\n\n    const headers = [\"Product\", \"Description\", \"\"];\n\n    const hostname =\n        process.env.NODE_ENV === \"development\"\n            ? \"http://localhost:3000\"\n            : window.location.origin;\n    const currentURL = window.location.href;\n\n    useEffect(() => {\n        getPlans();\n    }, []);\n\n    const getPlans = () => {\n        axios\n            .get(`${hostname}/partner/product/${urlUuid}/plans/data`)\n            .then((response) => {\n                setLoader(false);\n\n                if (response.data) {\n                    setPlans(response.data.plans);\n                }\n            })\n            .catch((error) => {\n                console.error(error);\n                setError({\n                    status: true,\n                    message:\n                        error.err?.errorMessage || \"Something went wrong!!!\",\n                });\n            });\n    };\n\n    /**\n     * @param  {} product\n     * Generate CCP url\n     */\n    const redirectToBuyMore = (product) => {\n        setProductName(product.name);\n\n        sessionStorage.setItem(\"or\", urlOrderReferenceNumber);\n\n        axios\n            .post(\n                `${hostname}/partner/product/${urlUuid}/buymore/${product.id}/${urlOrderReferenceNumber}`, //buyMore\n                { currentURL }\n            )\n            .then((res) => {\n                if (res.data.redirectUrl) {\n                    window.open(res.data.redirectUrl);\n                } else {\n                    setError({\n                        status: true,\n                        message:\n                            res?.data?.err?.errorMessage ||\n                            \"Something went wrong!!!\",\n                    });\n                }\n                setSpinner(false);\n            })\n            .catch((error) => {\n                setError({\n                    status: true,\n                    message:\n                        error.response?.data.err?.errorMessage ||\n                        \"Something went wrong!!!\",\n                });\n            });\n    };\n\n    const buttonPropsBuyMore = (product) => {\n        return {\n            size: \"small\",\n            tooltipAlignment: \"center\",\n            onClick: () => redirectToBuyMore(product),\n            className: \"buy-more-button\",\n        };\n    };\n\n    const skeletTableProps = () => ({\n        headers,\n        columnCount: 3,\n        rowCount: 20,\n        zebra: true,\n        compact: false,\n        showHeader: true,\n        showToolbar: false,\n    });\n\n    const loadingProps = () => ({\n        active: spinner,\n        withOverlay: false,\n        small: true,\n        description: \"\",\n    });\n\n    const notificationProps = (error) => ({\n        kind: \"error\",\n        className: \"switch-error\",\n        lowContrast: false,\n        role: \"alert\",\n        title: productName + \" - \" + error.message,\n        subtitle: \"Please try again or contact support if the error persists.\",\n        iconDescription: \"describes the close button\",\n        statusIconDescription: \"describes the status icon\",\n        hideCloseButton: false,\n        onCloseButtonClick: () => onCloseButtonClick(),\n    });\n\n    const onCloseButtonClick = () => setError({ status: false, message: \"\" });\n\n    return (\n        <ContainerComponent>\n            {error.status && (\n                <InlineNotification {...notificationProps(error)} />\n            )}\n\n            {loading ? (\n                <>\n                    <div style={{ width: \"auto\" }}>\n                        <DataTableSkeleton {...skeletTableProps()} />\n                        <br />\n                    </div>\n                </>\n            ) : (\n                <>\n                    <TableContainer\n                        title='Plans'\n                        description='Click configure to build desired configuration and order.'\n                    >\n                        <Table>\n                            <TableHead>\n                                <TableRow>\n                                    {headers.map((header) => (\n                                        <TableHeader key={header}>\n                                            {header}\n                                        </TableHeader>\n                                    ))}\n                                    <TableHeader></TableHeader>\n                                </TableRow>\n                            </TableHead>\n\n                            <TableBody>\n                                {plans.map((plan) => (\n                                    <TableRow key={plan.id}>\n                                        <TableCell>{plan.name}</TableCell>\n                                        <TableCell>\n                                            {plan.description}\n                                        </TableCell>\n\n                                        <TableCell>\n                                            {urlPlanId === plan.id ? (\n                                                \"Current plan\"\n                                            ) : (\n                                                <Button\n                                                    {...buttonPropsBuyMore(\n                                                        plan\n                                                    )}\n                                                >\n                                                    Select{\" \"}\n                                                    {spinner && (\n                                                        <Loading\n                                                            {...loadingProps()}\n                                                            className={\n                                                                \"some-class\"\n                                                            }\n                                                        />\n                                                    )}\n                                                </Button>\n                                            )}\n                                        </TableCell>\n                                    </TableRow>\n                                ))}\n                            </TableBody>\n                        </Table>\n                    </TableContainer>\n                </>\n            )}\n        </ContainerComponent>\n    );\n}\n"]},"metadata":{},"sourceType":"module"}